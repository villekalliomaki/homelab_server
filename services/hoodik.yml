- name: Storage service
  hosts: homelab
  remote_user: root

  vars_files:
      - ../global.yml

  vars:
      service:
          name: hoodik
          user: hoodik

  tasks:
      - name: User
        ansible.builtin.import_role:
            name: service_user

      - name: Directories
        ansible.builtin.import_role:
            name: directories
        vars:
            directories_container_volume:
                create: true
                subdirectories:
                    - one
                    - two
                    - three
            directories_container_logs:
                create: true
                subdirectories:
                    - one
                    - two
                    - three
            directories_container_cache:
                create: true
                subdirectories:
                    - one
                    - two
                    - three

      - name: Service test pod
        ansible.builtin.import_role:
            name: pod
